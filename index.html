<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">

<style>
   #clock {
    font-size: 60px;
    font-weight: 600;
    margin-bottom: 6px;
}
#dateLine {
    font-size: 18px;
    opacity: 0.8;
    margin-bottom: 4px;
}

#timeLine {
    font-size: 60px;
    font-weight: 600;
}
   body {
        margin: 0;
        padding: 20px;
        background: #121212;
        color: #fff;
        font-family: "JetBrains Mono", monospace;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }

    .row {
        width: 100%;
        max-width: 1000px;
        display: flex;
        justify-content: space-between;
        gap: 20px;
    }

    .card {
        flex: 1;
        padding: 15px;
        background: #1e1e1e;
        border-radius: 10px;
    }

    .card h3 {
        margin: 0 0 10px 0;
        font-size: 18px;
        font-weight: 600;
    }

    #rss-combined {
        width: 100%;
        max-width: 1000px;
        background: #1e1e1e;
        border-radius: 10px;
        padding: 15px;
        display: flex;
        justify-content: space-between;
        gap: 20px;
    }

    .news-section {
        flex: 1;
        min-width: 0;
    }

    .news-section h3 {
        margin: 0 0 8px 0;
        font-size: 16px;
        font-weight: 600;
    }

    .rss-item {
        margin-bottom: 10px;
        font-size: 14px;
        line-height: 1.3;
    }

    /* SEARCH BAR */
    .search-wrapper {
        position: relative;
        width: 100%;
    }

    .search-wrapper input {
        width: 100%;
        padding: 10px 60px 10px 12px;
        border-radius: 6px;
        border: none;
        font-family: "JetBrains Mono", monospace;
        font-size: 15px;
        box-sizing: border-box;
    }

    .search-wrapper button {
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        padding: 6px 12px;
        border: none;
        border-radius: 6px;
        background: #4da3ff;
        color: #fff;
        font-family: "JetBrains Mono", monospace;
        cursor: pointer;
        font-size: 14px;
    }

    .quick-links a {
        display: block;
        color: #4da3ff;
        margin-bottom: 6px;
        text-decoration: none;
    }
#stocks-section {
  display: flex;
  gap: 20px;
  margin-top: 20px;
}

.stock-card {
  flex: 1;
  background: #1e1e1e;
  padding: 20px;
  border-radius: 12px;
  color: white;
  font-family: "JetBrains Mono", monospace;
  box-shadow: 0 0 10px rgba(0,0,0,0.4);
  min-height: 120px; /* prevents tiny boxes */
}

.stock-card h2 {
  margin: 0 0 10px 0;
  font-size: 20px;
}

.stock-card .price {
  font-size: 28px;
  font-weight: bold;
}

.stock-card .change {
  font-size: 18px;
  margin-top: 5px;
}

.stock-card .volume {
  margin-top: 10px;
  font-size: 14px;
  opacity: 0.8;
}
</style>
</head>

<body>

<!-- ROW 1: TIME + QUICK LINKS -->
<div class="row">
    <div class="card">
      <div id="dateLine"></div>
<div id="timeLine"></div>
    </div>

    <div class="card quick-links">
        <h3>Quick Links</h3>
        <a href="https://www.linkedin.com" target="_blank">LinkedIn</a>
        <a href="https://mail.google.com" target="_blank">Gmail</a>
        <a href="https://calendar.google.com" target="_blank">Google Calendar</a>
        <a href="https://ito.intuit.com" target="_blank">Intuit</a>
    </div>
</div>

<!-- ROW 2: THREE WEATHER CARDS -->
<div class="row">
    <div class="card">
        <h3>Chicago</h3>
        <div id="weather-chicago">Loading...</div>
    </div>

    <div class="card">
        <h3>NYC</h3>
        <div id="weather-nyc">Loading...</div>
    </div>

    <div class="card">
        <h3>Tucson</h3>
        <div id="weather-tucson">Loading...</div>
    </div>
</div>

<!-- ROW 3: SEARCH -->
<div class="row">
    <div class="card search-card">
        <div class="search-wrapper">
            <input id="searchBox" type="text" placeholder="Search...">
            <button id="searchBtn">Go</button>
        </div>
    </div>
</div>

<!-- ROW 4: NEWS -->
<div id="rss-combined"></div>

<!--ROW 5: STOCKS-->
<div id="stocks-section">
  <div class="stock-card" id="QQQ"></div>
  <div class="stock-card" id="SPY"></div>
  <div class="stock-card" id="GLD"></div>
  <div class="stock-card" id="SLV"></div>
</div>
<script>

/* CLOCK */
function updateClock() {
    const now = new Date();

    const time = now.toLocaleTimeString("en-US", {
        hour: "numeric",
        minute: "2-digit",
        second: "2-digit",
    });

    const date = now.toLocaleDateString("en-US", {
        weekday: "long",
        month: "long",
        day: "numeric"
    });

    document.getElementById("dateLine").textContent = date;
    document.getElementById("timeLine").textContent = time;
}
setInterval(updateClock, 1000);
updateClock();

/* SEARCH */
document.getElementById("searchBox").addEventListener("keydown", e => {
    if (e.key === "Enter") {
        const q = e.target.value.trim();
        if (q) window.open("https://www.google.com/search?q=" + encodeURIComponent(q));
    }
});

document.getElementById("searchBtn").addEventListener("click", () => {
    const q = document.getElementById("searchBox").value.trim();
    if (q) window.open("https://www.google.com/search?q=" + encodeURIComponent(q));
});

/* WEATHER â€” FIXED VERSION */
async function loadWeather(id, lat, lon) {
    try {
        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&temperature_unit=fahrenheit&windspeed_unit=mph`;
        const res = await fetch(url);
        const data = await res.json();

        const w = data.current_weather;

        const emoji =
            w.temperature < 32 ? "â„ï¸" :
            w.temperature < 60 ? "ðŸŒ¤ï¸" :
            w.temperature < 80 ? "â˜€ï¸" : "ðŸ”¥";

        document.getElementById(id).textContent =
            `${emoji} ${w.temperature}Â°F â€” Wind ${Math.round(w.windspeed)} mph`;

    } catch {
        document.getElementById(id).textContent = "Unavailable";
    }
}

loadWeather("weather-chicago", 41.8781, -87.6298);
loadWeather("weather-nyc", 40.7128, -74.0060);
loadWeather("weather-tucson", 32.2226, -110.9747);

/* RSS NEWS */
async function loadRSSSectionJSON(title, url, count, container) {
    try {
        const api = "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent(url);
        const res = await fetch(api);
        const data = await res.json();

        if (!data.items || data.items.length === 0) throw new Error();

        const items = data.items.slice(0, count);

        const section = document.createElement("div");
        section.className = "news-section";
        section.innerHTML = `<h3>${title}</h3>`;

        items.forEach(item => {
            const div = document.createElement("div");
            div.className = "rss-item";
            div.innerHTML = `
                <strong>${item.title}</strong><br>
                <a href="${item.link}" target="_blank" style="color:#4da3ff;">Read more</a>
            `;
            section.appendChild(div);
        });

        container.appendChild(section);

    } catch {
        const error = document.createElement("div");
        error.textContent = `${title}: Unable to load news.`;
        container.appendChild(error);
    }
}

async function loadAllNews() {
    const container = document.getElementById("rss-combined");
    container.innerHTML = "";

    await loadRSSSectionJSON("National US News", "https://feeds.npr.org/1003/rss.xml", 2, container);
    await loadRSSSectionJSON("Chicago", "https://abc7chicago.com/feed/", 2, container);
    await loadRSSSectionJSON("Tucson", "https://www.kgun9.com/news/local-news.rss", 2, container);
    await loadRSSSectionJSON("Financial", "https://www.marketwatch.com/rss/topstories", 2, container);
}
loadAllNews();
</script>
<script>
const tickers = ["QQQ", "SPY", "GLD", "SLV"];
const API_KEY = "demo"; // works for basic data

async function loadStock(ticker) {
  const url = `https://financialmodelingprep.com/api/v3/quote/${ticker}?apikey=${API_KEY}`;
  const res = await fetch(url);
  const data = await res.json();
  const stock = data[0];

  const card = document.getElementById(ticker);

  const changeColor = stock.changesPercentage >= 0 ? "#4caf50" : "#ff5252";

  card.innerHTML = `
    <h2>${ticker}</h2>
    <div class="price">$${stock.price.toFixed(2)}</div>
    <div class="change" style="color:${changeColor}">
      ${stock.changesPercentage.toFixed(2)}%
    </div>
    <div class="volume">Volume: ${stock.volume.toLocaleString()}</div>
  `;
}

function loadAllStocks() {
  tickers.forEach(loadStock);
}

loadAllStocks();
setInterval(loadAllStocks, 60000);
</script>
</body>
</html>